% Copyright 2011 Beno√Æt Chesneau
% 
% Licensed under the Apache License, Version 2.0 (the "License"); you may not
% use this file except in compliance with the License. You may obtain a copy of
% the License at
%
%   http://www.apache.org/licenses/LICENSE-2.0
%
% Unless required by applicable law or agreed to in writing, software
% distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
% WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
% License for the specific language governing permissions and limitations under
% the License.

{so_name, "couch_icu_driver.so"}.

{port_envs, [
  {"DRV_CFLAGS",  "$DRV_CFLAGS -DPIC -O2 -fno-common"},
  {"DRV_LDFLAGS", "$DRV_LDFLAGS -lm -licuuc -licudata -licui18n -lpthread"},

  {"linux", "DRV_LDFLAGS", "$DRV_LDFLAGS -lcrypt"},

  {"freebsd", "DRV_CFLAGS", "$DRV_CFLAGS -I/usr/local/include"},
  {"freebsd", "DRV_LDFLAGS", "$DRV_LDFLAGS -L/usr/local/lib"}
]}.


{deps, [
    {oauth, ".*", {git, "git://refuge.io/erlang-oauth.git", {branch,
        "master"}}},
    {ibrowse, ".*", {git, "git://refuge.io/ibrowse.git", {branch,
        "refuge"}}},
    {mochiweb, ".*", {git, "git://refuge.io/mochiweb.git", {tag,
        "1.5.0"}}},

    {couchjs, ".*", {git, "git://refuge.io/couchjs.git", "master"}}
]}.

{cover_enabled, true}.
{eunit_opts, [{report,{eunit_surefire,[{dir,"."}]}}]}.
{erl_opts, [debug_info]}.

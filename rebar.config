%% -*- tab-width: 4;erlang-indent-level: 4;indent-tabs-mode: nil -*-
%% ex: ft=erlang ts=4 sw=4 et

{sub_dirs, ["rel"]}.
{cover_enabled, true}.
{eunit_opts, [{report,{eunit_surefire,[{dir,"."}]}}]}.
{erl_opts, [debug_info]}.
{require_otp_vsn, "R13B03|R14"}.

{deps, [
    {oauth, ".*", {git, "git://refuge.io/erlang-oauth.git", {branch,
        "master"}}},
    {ibrowse, ".*", {git, "git://refuge.io/ibrowse.git", {branch,
        "rcouch"}}},
    {mochiweb, ".*", {git, "git://refuge.io/mochiweb.git", {tag,
        "1.5.2"}}},
    {couchjs, ".*", {git, "git://refuge.io/couchjs.git", "master"}},
    {snappy, ".*", {git, "git://refuge.io/snappy-erlang.git", 
                   {branch, "refuge"}}},
    {ejson, ".*", {git, "git://refuge.io/ejson.git", "master"}},
    {couchjs, ".*", {git, "git://refuge.io/couchjs.git", {branch,
                "shared"}}}
]}.

{so_name, "couch_icu_driver.so"}.
{port_envs, [
  {"DRV_CFLAGS",  "$DRV_CFLAGS -DPIC -O2 -fno-common"},
  {"DRV_LDFLAGS", "$DRV_LDFLAGS -lm -licuuc -licudata -licui18n -lpthread"},
  {"linux", "DRV_LDFLAGS", "$DRV_LDFLAGS -lcrypt"},
  {"freebsd", "DRV_CFLAGS", "$DRV_CFLAGS -I/usr/local/include"},
  {"freebsd", "DRV_LDFLAGS", "$DRV_LDFLAGS -L/usr/local/lib"}
]}.
